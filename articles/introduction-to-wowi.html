<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to wowi ‚Ä¢ wowi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to wowi">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wowi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction-to-wowi.html">Introduction to wowi</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nutspatial/wowi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to wowi</h1>
                        <h4 data-toc-skip class="author">Tom√°s Zaba</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nutspatial/wowi/blob/v1.0.0/vignettes/introduction-to-wowi.Rmd" class="external-link"><code>vignettes/introduction-to-wowi.Rmd</code></a></small>
      <div class="d-none name"><code>introduction-to-wowi.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Acute malnutrition remains a critical public health concern,
particularly in fragile and humanitarian settings, often requiring
targetted interventions. Its spatial distribution is often uneven, with
clusters of elevated burden. Understanding where these unusual
high-burden areas exist is crucial for effective planning, resource
allocation, early warning systems, and timely response to alleviate the
plight of the affected population.</p>
<p>In this article, you will learn how to use the <code>wowi</code> R
package to understand the spatial distribution of acute malnutrition in
your data set. Before we start with the walk through, it is important to
have some critical concepts under your belt.</p>
<div class="section level3">
<h3 id="the-spatial-scan-approach">The spatial scan approach<a class="anchor" aria-label="anchor" href="#the-spatial-scan-approach"></a>
</h3>
<p>To identify statistically significant spatial clusters, analysts
frequently rely on <a href="https://www.satscan.org" class="external-link"><code>SaTScan</code></a>, a powerful tool
for spatial and spatio-temporal scan statistics. SaTScan‚Äôs
<strong>Bernoulli model</strong> is particularly suited for binary
outcomes such as:</p>
<ul>
<li>‚ÄúCase‚Äù = child is acutely malnourished</li>
<li>‚ÄúControl‚Äù = child is not acutely malnourished</li>
</ul>
<p>It evaluates whether observed clustering of cases exceeds what would
be expected by chance <span class="citation">Martin Kulldorff (July
2022)</span>.</p>
</div>
<div class="section level3">
<h3 id="using-wowi-to-identify-spatial-clusters-of-high-rates-of-acute-malnutrition">Using <code>wowi</code> to identify spatial clusters of high rates
of acute malnutrition<a class="anchor" aria-label="anchor" href="#using-wowi-to-identify-spatial-clusters-of-high-rates-of-acute-malnutrition"></a>
</h3>
<p>The <code>wowi</code> R package provides a tidy, reproducible
interface for running Bernoulli spatial scan analysis via SaTScan. It
depends on the <a href="https://cran.r-project.org/web/packages/rsatscan/index.html" class="external-link"><code>rsatscan</code></a>
R package, which enables the use of <code>SaTScan</code> software from
within R. While <code>rsatscan</code> offers general-purpose
functionality, <code>wowi</code> was specifically developed for acute
malnutrition analysis, tailoring the tools to the needs of
nutrition-focused spatial investigations.</p>
<div class="section level4">
<h4 id="what-outputs-does-wowi-provide">What outputs does <code>wowi</code> provide?<a class="anchor" aria-label="anchor" href="#what-outputs-does-wowi-provide"></a>
</h4>
<p>The package returns the standard set of outputs generated by
SaTScan:</p>
<ol style="list-style-type: decimal">
<li>An interactive HTML map displaying the detected clusters. These can
be opened with any web browser, and user can play it with it - zoom in
and out, click on the bubbles and see the statistics about the bubbles,
and more.</li>
<li>A text-based output with extension <code>.txt</code> containing the
results.</li>
<li>Additional GIS-based files (e.g., shapefiles), which can be useful
for further geospatial manipulation or integration into other mapping
workflows.</li>
<li>Furthermore, it also returns a tidy data frame summarising the
detected clusters, parsed from the text-based file described in point 2.
This summary enables easier manipulation and integration into an
analyst‚Äôs downstream workflow.</li>
</ol>
<blockquote>
<p><strong>Tip</strong> üí°</p>
<p>The output described in point 4 offers an IPC Acute
Malnutrition-related insight for IPC users. It indicates whether the
number of survey clusters or enumeration area IDs included in the
detected cluster‚Äîand the total number of children‚Äîmeet the IPC Acute
Malnutrition criteria for disaggregated analysis, as recommended when
the design effect exceeds 1.3 <span class="citation">(IPC Global
Partners 2021)</span></p>
<p>The results are presented in the final column of the table and take
one of two possible values:</p>
<ul>
<li><p>‚Äúyes‚Äù ‚Äì the number of cluster IDs is ‚â• 5 and the number of
children with valid measurements is ‚â• 100.</p></li>
<li><p>‚Äúno‚Äù ‚Äì the criteria above are not met.</p></li>
</ul>
</blockquote>
</div>
</div>
</div>
<div class="section level2">
<h2 id="from-data-to-clusters-the-wowi-analysis-workflow">From data to clusters: the wowi analysis workflow<a class="anchor" aria-label="anchor" href="#from-data-to-clusters-the-wowi-analysis-workflow"></a>
</h2>
<p>The analysis workflow with wowi begins with the standard
anthropometric data processing steps: data wrangling and quality checks.
For this purpose, wowi relies on the <a href="https://nutriverse.io/mwana/dev/" class="external-link"><code>mwana</code></a> package,
which will be installed or updated automatically when you install
wowi.</p>
<p>Further downstream in the analysis, the sf package is required to
generate shapefile-related outputs. Note that <a href="https://r-spatial.github.io/sf/" class="external-link"><code>sf</code></a> is not
installed with wowi, so you must install it separately.</p>
<blockquote>
<p><strong>Note ‚ìò</strong></p>
<p><code>wowi</code> will not function unless the SaTScan software is
installed on your machine. You can download it from: <a href="https://www.satscan.org" class="external-link uri">https://www.satscan.org</a>.</p>
<p>Once installed, copy the path to the SaTScan executable on your
machine. This is needed for R to locate and run it.</p>
</blockquote>
<p>We will now begin the demonstration using the package‚Äôs built-in
dataset, <code>anthro</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">anthro</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 √ó 11</span></span></span>
<span><span class="co">#&gt;   district cluster   sex   age weight height oedema  muac     y     x precision</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Kotido        15     2  48.9   15.9  108.  n        128  2.93  34.1         8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Kaabong      161     1  43.8   15    106.  n        128  3.65  34.1         4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Kaabong      161     1  37.0   13.6   91.9 n        149 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Kaabong      161     1  <span style="color: #BB0000;">NA</span>      7    100   n        150 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Kaabong      160     1  22.5    8.6   74.2 n        119  3.65  34.1         4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Kaabong      160     1  32.1   13.4   88.1 n        163 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>This is a SMART survey dataset, which includes geographical
coordinates: the <code>x</code> and <code>y</code> columns, along with
the corresponding precision recorded in the <code>precision</code>
column.</p>
<blockquote>
<p><strong>Note ‚ìò</strong></p>
<p><strong>Geographical coordinates are indispensable for spatial
cluster detection</strong> ‚Äî without precise location data, spatial
analysis simply cannot be performed.</p>
</blockquote>
<div class="section level3">
<h3 id="data-wrangling">Data wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"></a>
</h3>
<p>You can scan for spatial clusters using acute malnutrition case
definitions based on weight-for-height z-scores and/or oedema, mid-upper
arm circumference (MUAC) and/or oedema, or a combined definition. The
data wrangling workflow should be configured accordingly. In this
article, we will demonstrate using the former.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nutriverse/mwana" class="external-link">mwana</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">anthro</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://nutriverse.io/mwana/reference/mw_wrangle_wfhz.html" class="external-link">mw_wrangle_wfhz</a></span><span class="op">(</span></span>
<span>    sex <span class="op">=</span> <span class="va">sex</span>,</span>
<span>    weight <span class="op">=</span> <span class="va">weight</span>,</span>
<span>    height <span class="op">=</span> <span class="va">height</span>,</span>
<span>    .recode_sex <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://nutriverse.io/mwana/reference/define_wasting.html" class="external-link">define_wasting</a></span><span class="op">(</span></span>
<span>    zscores <span class="op">=</span> <span class="va">wfhz</span>,</span>
<span>    edema <span class="op">=</span> <span class="va">oedema</span>,</span>
<span>    .by <span class="op">=</span> <span class="st">"zscores"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    longitude <span class="op">=</span> <span class="va">y</span>,</span>
<span>    latitude <span class="op">=</span> <span class="va">x</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; ================================================================================</span></span></code></pre></div>
<p>Hereafter, you can check the quality of the data. Learn how to do so
<a href="https://nutriverse.io/mwana/dev/articles/plausibility.html" class="external-link">here</a>.</p>
</div>
<div class="section level3">
<h3 id="running-the-spatial-scan">Running the spatial scan<a class="anchor" aria-label="anchor" href="#running-the-spatial-scan"></a>
</h3>
<p>This is handled by the <code><a href="../reference/ww_run_satscan.html">ww_run_satscan()</a></code> function. Read
its full documentation by typing <code><a href="../reference/ww_run_satscan.html">?ww_run_satscan</a></code> in your
console or by clicking <a href="https://nutspatial.github.io/wowi/reference/ww_run_satscan.html">here</a>.</p>
<p>You can run the analysis on either a single-area dataset or a
multiple-area dataset. We will begin with the former, followed by the
latter</p>
<div class="section level4">
<h4 id="single-area-data-set">Single-area data set<a class="anchor" aria-label="anchor" href="#single-area-data-set"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Filter out one district from the data set -----</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">district</span> <span class="op">==</span> <span class="st">"Kotido"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Load rsatscan ----</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.satscan.org" class="external-link">rsatscan</a></span><span class="op">)</span>                                                     <span class="co">#&lt;1&gt;</span></span>
<span></span>
<span><span class="co">## Set up the parameters ----</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ww_run_satscan.html">ww_run_satscan</a></span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">d</span>,</span>
<span>  filename <span class="op">=</span> <span class="st">"Kotido"</span>,</span>
<span>  dir <span class="op">=</span> <span class="va">directory</span>,                                                    <span class="co">#&lt;2&gt;</span></span>
<span>  sslocation <span class="op">=</span> <span class="st">"/Applications/SaTScan.app/Contents/app"</span>,              <span class="co">#&lt;3&gt;</span></span>
<span>  ssbatchfilename <span class="op">=</span> <span class="st">"satscan"</span>,                                        <span class="co">#&lt;4&gt;</span></span>
<span>  satscan_version <span class="op">=</span> <span class="st">"10.3.2"</span>,</span>
<span>  .by_area <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .scan_for <span class="op">=</span> <span class="st">"high-low-rates"</span>,</span>
<span>  .gam_based <span class="op">=</span> <span class="st">"wfhz"</span>,</span>
<span>  area <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  latitude <span class="op">=</span> <span class="va">latitude</span>,</span>
<span>  longitude <span class="op">=</span> <span class="va">longitude</span>,</span>
<span>  cleanup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li><p>Although you will never use the <code>rsatscan</code> package
explicitly, you must make it available in your environment. This is
because it creates a specific environment object, <code>ssenv</code>,
required for <code>wowi</code> to function. If this is not loaded,
<code>wowi</code> will not run.</p></li>
<li><p>Specify the folder where you would like the output results to be
saved for your analysis.</p></li>
<li><p>Provide the path to your SaTScan GUI installation. This varies
depending on your operating system (OS). For macOS, it is typically
‚Äú/Applications/SaTScan.app/Contents/app‚Äù; for Windows, ‚ÄúC:/Program
Files/SaTScan‚Äù.</p></li>
<li><p>Indicate the name of the SaTScan batch file. For macOS, use
‚Äúsatscan‚Äù; for Windows, use ‚ÄúSaTScanBatch64‚Äù.</p></li>
</ol>
<div class="section level5">
<h5 id="getting-acquainted-with-the-files">Getting acquainted with the files<a class="anchor" aria-label="anchor" href="#getting-acquainted-with-the-files"></a>
</h5>
<p>The code above will generate seven files in the folder you specified
using the <code>dir</code> argument. These files will share a common
base name, as defined by the string provided in the
<code>filename</code> argument.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; [1] "Kotido.cas"             "Kotido.clustermap.html" "Kotido.col.prj"</span></span>
<span><span class="co">#&gt; [4] "Kotido.ctl"             "Kotido.geo"             "Kotido.gis.prj"</span></span>
<span><span class="co">#&gt; [7] "Kotido.gis.shp"         "Kotido.gis.shx"         "Kotido.prm"</span></span></code></pre></div>
<ul>
<li>The <code>.cas</code>, <code>.ctl</code> and <code>.geo</code> files
are SaTScan input datasets representing cases, controls and geographical
coordinates, respectively.</li>
<li>The <code>.clustermap.html</code> file is an interactive HTML
visualisation with an embedded Google Map displaying the detected
clusters.</li>
<li>All other files are related to shapefiles and can be used for
further GIS analysis and manipulation.</li>
</ul>
<p>Furthermore, we can view the results in a text-based format. To do
this, we access the object to which we assigned the results of
<code><a href="../reference/ww_run_satscan.html">ww_run_satscan()</a></code>. In our demo, this object is called
results.</p>
<p>To see the text-based results, we use <code>results$.txt</code>. As
this file is quite long, for the purposes of this demo we will only
display the first 48 rows.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt;  [1] "                                 _____________________________"</span></span>
<span><span class="co">#&gt;  [2] ""</span></span>
<span><span class="co">#&gt;  [3] "                                        SaTScan v10.3.2"</span></span>
<span><span class="co">#&gt;  [4] "                                 _____________________________"</span></span>
<span><span class="co">#&gt;  [5] ""</span></span>
<span><span class="co">#&gt;  [6] "results"</span></span>
<span><span class="co">#&gt;  [7] ""</span></span>
<span><span class="co">#&gt;  [8] "Program run on: Sat Aug  2 16:20:17 2025"</span></span>
<span><span class="co">#&gt;  [9] ""</span></span>
<span><span class="co">#&gt; [10] "Purely Spatial analysis"</span></span>
<span><span class="co">#&gt; [11] "scanning for clusters with high or low rates"</span></span>
<span><span class="co">#&gt; [12] "using the Bernoulli model."</span></span>
<span><span class="co">#&gt; [13] "_______________________________________________________________________________________________"</span></span>
<span><span class="co">#&gt; [14] ""</span></span>
<span><span class="co">#&gt; [15] "SUMMARY OF DATA"</span></span>
<span><span class="co">#&gt; [16] ""</span></span>
<span><span class="co">#&gt; [17] "Study period.......................: 2025/08/02 to 2025/08/02"</span></span>
<span><span class="co">#&gt; [18] "Number of locations................: 36"</span></span>
<span><span class="co">#&gt; [19] "Total population...................: 333"</span></span>
<span><span class="co">#&gt; [20] "Total number of cases..............: 26"</span></span>
<span><span class="co">#&gt; [21] "Percent cases......................: 7.8"</span></span>
<span><span class="co">#&gt; [22] "_______________________________________________________________________________________________"</span></span>
<span><span class="co">#&gt; [23] ""</span></span>
<span><span class="co">#&gt; [24] "CLUSTERS DETECTED"</span></span>
<span><span class="co">#&gt; [25] ""</span></span>
<span><span class="co">#&gt; [26] "1.Location IDs included.: 10, 9"</span></span>
<span><span class="co">#&gt; [27] "  Coordinates / radius..: (34.113909 N, 3.087933 E) / 1.20 km"</span></span>
<span><span class="co">#&gt; [28] "  Span..................: 1.20 km"</span></span>
<span><span class="co">#&gt; [29] "  Population............: 25"</span></span>
<span><span class="co">#&gt; [30] "  Number of cases.......: 6"</span></span>
<span><span class="co">#&gt; [31] "  Expected cases........: 1.95"</span></span>
<span><span class="co">#&gt; [32] "  Observed / expected...: 3.07"</span></span>
<span><span class="co">#&gt; [33] "  Relative risk.........: 3.70"</span></span>
<span><span class="co">#&gt; [34] "  Percent cases in area.: 24.0"</span></span>
<span><span class="co">#&gt; [35] "  Log likelihood ratio..: 3.458213"</span></span>
<span><span class="co">#&gt; [36] "  P-value...............: 0.55"</span></span>
<span><span class="co">#&gt; [37] ""</span></span>
<span><span class="co">#&gt; [38] "2.Location IDs included.: 2, 3, 1"</span></span>
<span><span class="co">#&gt; [39] "  Coordinates / radius..: (33.930353 N, 3.172303 E) / 4.00 km"</span></span>
<span><span class="co">#&gt; [40] "  Span..................: 5.88 km"</span></span>
<span><span class="co">#&gt; [41] "  Population............: 35"</span></span>
<span><span class="co">#&gt; [42] "  Number of cases.......: 0"</span></span>
<span><span class="co">#&gt; [43] "  Expected cases........: 2.73"</span></span>
<span><span class="co">#&gt; [44] "  Observed / expected...: 0"</span></span>
<span><span class="co">#&gt; [45] "  Relative risk.........: 0"</span></span>
<span><span class="co">#&gt; [46] "  Percent cases in area.: 0"</span></span>
<span><span class="co">#&gt; [47] "  Log likelihood ratio..: 3.013494"</span></span>
<span><span class="co">#&gt; [48] "  P-value...............: 0.68"</span></span></code></pre></div>
<p>This file isn‚Äôt very convenient if we want to perform further
manipulation. Don‚Äôt worry ‚Äî <code><a href="../reference/ww_run_satscan.html">ww_run_satscan()</a></code> has got you
covered ‚òÇÔ∏è. It parses the text-based results into a tidy data frame that
you can easily work with üòé. To access it, simply subset the results
object like this: <code>results$.df</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; # A tibble: 4 √ó 18</span></span>
<span><span class="co">#&gt;   survey_area nr_EAs total_children total_cases `%_cases` location_ids geo</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;          &lt;int&gt;       &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 Kotido          36            333          26         7 10,9         34.11390‚Ä¶</span></span>
<span><span class="co">#&gt; 2 Kotido          36            333          26         7 2,3,1        33.93035‚Ä¶</span></span>
<span><span class="co">#&gt; 3 Kotido          36            333          26         7 15           34.11670‚Ä¶</span></span>
<span><span class="co">#&gt; 4 Kotido          36            333          26         7 28,30        34.05993‚Ä¶</span></span>
<span><span class="co">#&gt; # ‚Ñπ 11 more variables: radius &lt;chr&gt;, span &lt;chr&gt;, children &lt;int&gt;, n_cases &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   expected_cases &lt;dbl&gt;, observedExpected &lt;dbl&gt;, relative_risk &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `%_cases_in_area` &lt;dbl&gt;, log_lik_ratio &lt;dbl&gt;, pvalue &lt;dbl&gt;, ipc_amn &lt;chr&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="multiple-area-data-set">Multiple-area data set<a class="anchor" aria-label="anchor" href="#multiple-area-data-set"></a>
</h4>
<p>We use a dataset containing multiple areas. In our example dataset,
there are several districts, so we want to run the spatial scan on a
district-wise basis. To do this, we set the filename parameter to NULL,
then set <code>.by_area = TRUE</code>, and finally specify the column in
our dataset that stores the areas‚Äîin this case, district.</p>
<p>For this demo, we will filter out just two districts.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Filter out two districts -----</span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">district</span> <span class="op">==</span> <span class="st">"Kotido"</span> <span class="op">|</span> <span class="va">district</span> <span class="op">==</span> <span class="st">"Abim"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Set up the parameters ----</span></span>
<span><span class="va">multiple_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ww_run_satscan.html">ww_run_satscan</a></span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">ds</span>,</span>
<span>  filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dir <span class="op">=</span> <span class="va">directory</span>,</span>
<span>  sslocation <span class="op">=</span> <span class="st">"/Applications/SaTScan.app/Contents/app"</span>,</span>
<span>  ssbatchfilename <span class="op">=</span> <span class="st">"satscan"</span>,</span>
<span>  satscan_version <span class="op">=</span> <span class="st">"10.3.2"</span>,</span>
<span>  .by_area <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .scan_for <span class="op">=</span> <span class="st">"high-low-rates"</span>,</span>
<span>  .gam_based <span class="op">=</span> <span class="st">"wfhz"</span>,</span>
<span>  latitude <span class="op">=</span> <span class="va">latitude</span>,</span>
<span>  longitude <span class="op">=</span> <span class="va">longitude</span>,</span>
<span>  area <span class="op">=</span> <span class="va">district</span>,</span>
<span>  cleanup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This returns the following outputs:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt;  [1] "Abim.cas"               "Abim.clustermap.html"   "Abim.col.prj"</span></span>
<span><span class="co">#&gt;  [4] "Abim.ctl"               "Abim.geo"               "Abim.gis.prj"</span></span>
<span><span class="co">#&gt;  [7] "Abim.gis.shp"           "Abim.gis.shx"           "Abim.prm"</span></span>
<span><span class="co">#&gt; [10] "Kotido.cas"             "Kotido.clustermap.html" "Kotido.col.prj"</span></span>
<span><span class="co">#&gt; [13] "Kotido.ctl"             "Kotido.geo"             "Kotido.gis.prj"</span></span>
<span><span class="co">#&gt; [16] "Kotido.gis.shp"         "Kotido.gis.shx"         "Kotido.prm"</span></span></code></pre></div>
<p>We can also obtain the tidy data frame:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; # A tibble: 8 √ó 19</span></span>
<span><span class="co">#&gt;   survey_area nr_EAs total_children total_cases `%_cases` location_ids     geo</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;          &lt;int&gt;       &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 Kotido          36            333          26         7 10,9             34.1‚Ä¶</span></span>
<span><span class="co">#&gt; 2 Kotido          36            333          26         7 2,3,1            33.9‚Ä¶</span></span>
<span><span class="co">#&gt; 3 Kotido          36            333          26         7 15               34.1‚Ä¶</span></span>
<span><span class="co">#&gt; 4 Kotido          36            333          26         7 28,30            34.0‚Ä¶</span></span>
<span><span class="co">#&gt; 5 Abim            31            223          15         6 111,116,117,112‚Ä¶ 33.6‚Ä¶</span></span>
<span><span class="co">#&gt; 6 Abim            31            223          15         6 135,136,137,133  33.9‚Ä¶</span></span>
<span><span class="co">#&gt; 7 Abim            31            223          15         6 127,129,128,130  33.8‚Ä¶</span></span>
<span><span class="co">#&gt; 8 Abim            31            223          15         6 126,143,131      33.7‚Ä¶</span></span>
<span><span class="co">#&gt; # ‚Ñπ 12 more variables: radius &lt;chr&gt;, span &lt;chr&gt;, children &lt;int&gt;, n_cases &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   expected_cases &lt;dbl&gt;, observedExpected &lt;dbl&gt;, relative_risk &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `%_cases_in_area` &lt;dbl&gt;, log_lik_ratio &lt;dbl&gt;, pvalue &lt;dbl&gt;, ipc_amn &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   area &lt;chr&gt;</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-ipcmanual" class="csl-entry">
IPC Global Partners. 2021. <em>Integrated Food Security Phase
Classification Technical Manual Version 3.1: Evidence and Standards for
Better Food Security and Nutrition Decisions</em>. <a href="https://www.ipcinfo.org/ipcinfo-website/resources/ipc-manual/en/" class="external-link">https://www.ipcinfo.org/ipcinfo-website/resources/ipc-manual/en/</a>.
</div>
<div id="ref-satscan" class="csl-entry">
Martin Kulldorff. July 2022. <em>SaTScan User Guide for Version
10.1</em>. SaTScan Software for the spatial, temporal; space-time scan
statistics. <a href="http://www.satscan.org/" class="external-link">http://www.satscan.org/</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tom√°s Zaba.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

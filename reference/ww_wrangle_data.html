<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare SaTScan-required input data files for a Bernoulli spatial scan analysis and save them in a user-defined working directory — ww_wrangle_data • wowi</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare SaTScan-required input data files for a Bernoulli spatial scan analysis and save them in a user-defined working directory — ww_wrangle_data"><meta name="description" content="SaTScan's Bernoulli-based spatial scan requires the input data to be split
into cases, controls, and geographical coordinates files, saved in a format
readable by the software, and placed in a directory it can access.
ww_wrangle_data() is a convenient function designed for this task. It
assumes that the input anthropometric data has been pre-processed using the
{mwana} data wrangling functions."><meta property="og:description" content="SaTScan's Bernoulli-based spatial scan requires the input data to be split
into cases, controls, and geographical coordinates files, saved in a format
readable by the software, and placed in a directory it can access.
ww_wrangle_data() is a convenient function designed for this task. It
assumes that the input anthropometric data has been pre-processed using the
{mwana} data wrangling functions."><meta property="og:image" content="https://nutspatial.github.io/wowi/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wowi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nutspatial/wowi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare SaTScan-required input data files for a Bernoulli spatial scan analysis and save them in a user-defined working directory</h1>
      <small class="dont-index">Source: <a href="https://github.com/nutspatial/wowi/blob/main/R/data-wranglers.R" class="external-link"><code>R/data-wranglers.R</code></a></small>
      <div class="d-none name"><code>ww_wrangle_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>SaTScan's Bernoulli-based spatial scan requires the input data to be split
into cases, controls, and geographical coordinates files, saved in a format
readable by the software, and placed in a directory it can access.</p>
<p><code>ww_wrangle_data()</code> is a convenient function designed for this task. It
assumes that the input anthropometric data has been pre-processed using the
<code>{mwana}</code> data wrangling functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ww_wrangle_data</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  .gam_based <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wfhz"</span>, <span class="st">"muac"</span>, <span class="st">"combined"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A data frame object that has been wrangled using
<code>mwana::mw_wrangle_*()</code> functions.</p></dd>


<dt id="arg-filename">filename<a class="anchor" aria-label="anchor" href="#arg-filename"></a></dt>
<dd><p>A quoted string identifying the analysis area.</p></dd>


<dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>A quoted string of the folder or directory in which the files
should be saved.</p></dd>


<dt id="arg--gam-based">.gam_based<a class="anchor" aria-label="anchor" href="#arg--gam-based"></a></dt>
<dd><p>A quoted string indicating the criterion used to define acute
malnutrition. This is used to identify the right vector where flagged values
are identified, and for which should be excluded from the analysis. Default
is <code>wfhz</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Three files are created and saved in the user-defined directory as defined
by <code>dir</code>: a <code>.cas</code> file for cases, a <code>.ctl</code> for controls, and
a <code>.geo</code> file for geographical coordinates. The full filenames will incorporate
the use-defined <code>filename</code> string.</p>
<p>The <code>.cas</code> and <code>.ctl</code> files will each have two columns: the first containing
survey cluster or enumeration area IDs, and the second containing only <code>1</code>s,
representing either cases or controls, respectively. The length of the <code>.cas</code>
file depends on the number of positive acute malnutrition cases
(<code>gam == 1</code>), and the <code>.ctl</code> file on the number of negative cases
(<code>gam == 0</code>).</p>
<p>The <code>.geo</code> file will have three columns: cluster or enumeration area IDs,
latitude, and longitude.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Given a temporary directory ----</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"input-files"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Wrangle data with `{mwana}` ----</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">anthro</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>longitude <span class="op">=</span> <span class="va">x</span>, latitude <span class="op">=</span> <span class="va">y</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">mwana</span><span class="fu">::</span><span class="fu"><a href="https://nutriverse.io/mwana/reference/mw_wrangle_wfhz.html" class="external-link">mw_wrangle_wfhz</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    sex <span class="op">=</span> <span class="va">sex</span>,</span></span>
<span class="r-in"><span>    .recode_sex <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    weight <span class="op">=</span> <span class="va">weight</span>,</span></span>
<span class="r-in"><span>    height <span class="op">=</span> <span class="va">height</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">mwana</span><span class="fu">::</span><span class="fu"><a href="https://nutriverse.io/mwana/reference/define_wasting.html" class="external-link">define_wasting</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    zscores <span class="op">=</span> <span class="va">wfhz</span>,</span></span>
<span class="r-in"><span>    .by <span class="op">=</span> <span class="st">"zscores"</span>,</span></span>
<span class="r-in"><span>    edema <span class="op">=</span> <span class="va">oedema</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Apply the function ----</span></span></span>
<span class="r-in"><span><span class="fu">ww_wrangle_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  .data <span class="op">=</span> <span class="va">x</span>,</span></span>
<span class="r-in"><span>  filename <span class="op">=</span> <span class="st">"Locality"</span>,</span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="va">directory</span>,</span></span>
<span class="r-in"><span>  .gam_based <span class="op">=</span> <span class="st">"wfhz"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/RtmpExbyO2/file1c652c7e476c/input-files/Locality"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Show created files ----</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"input-files"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Locality.cas" "Locality.ctl" "Locality.geo"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Display each files' content ----</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"input-files/Locality.cas"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"input-files/Locality.ctl"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"input-files/Locality.geo"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tomás Zaba.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

